<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../../styles/main.css" />
    <link rel="stylesheet" href="../../styles/web-projects.css" />
    <link rel="icon" href="https://avatars.githubusercontent.com/u/62946885?v=4"/>
    <title>GD Support</title>
  </head>

  <body>
    <div class="topnav" id="myTopnav">
      <a href="/">Home</a>
      <a href="/apps/index.html">Web Projects</a>
      <a href="https://github.com/Wyliemaster">Github</a>
      <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <i class="fa fa-bars"></i>
      </a>
    </div>

    <div class="giantTitleText" id="top">Known Issues & Topics</div>

    <div class="project-btns" id="issues"></div>
    <div class="issue-info" id="info"></div>

    <script>
        
      function getDate() {
        let components = Date().split(" ");
        let str = "";
        for (let index = 0; index < 4; index++) {
          str += `${components[index]} `;
        }
        return str.slice(0, str.length - 1);
      }

      function myFunction() {
        var x = document.getElementById("myTopnav");
        if (x.className === "topnav") {
          x.className += " responsive";
        } else {
          x.className = "topnav";
        }
      }

      fetch("data.json")
        .then((x) => x.json())
        .then((data) => {

          let issues = data["data"];

          issues.forEach((issue) => {
            let issue_name = issue["issue-name"].replace(/ /g, "-");

            let fixMsg = issue["issue-fix"] == null ? `As of ${getDate()}, There is no known fix` : issue["issue-fix"];

            document.getElementById("issues").innerHTML += `<a class="project-btn" onclick='showPopup(${issue["id"]})'><b class="project-btn-title">${issue["issue-name"]}`;

            document.body.innerHTML += `
                    <div class="hover_bkgr_fricc" id='${issue["id"]}' onclick="hidePopup(${issue["id"]})">
                        <span class="helper"></span>
                            <div>
                                <div class="popupCloseButton"  onclick="hidePopup(${issue["id"]})">&times;</div>
                                    <div class="issue-container">
                                        <a href="#top" style="text-decoration: none;  color: #000000;">
                                            <p class="issue-title" id="${issue_name}">
                                                ${issue["issue-name"]}
                                            </p>
                                        </a>
                                            <b>
                                                <p class="issue-desc">
                                                    Description and Technical Explanation
                                                </p>
                                            </b>
                                                <p class="issue-desc">
                                                    ${issue["issue-description"]}
                                                </p>
                                                    <b>
                                                        <p class="issue-desc">
                                                            ${issue["type"] == "BUG" ? "Fixes" : issue["type"] == "INFO" ? "Extra Info" : ""}
                                                        </p>
                                                    </b>
                                                        <p class="info">
                                                            ${fixMsg}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>`;
          });
        });

      function showPopup(name) {
        document.getElementById(name).style.display = "block";
      }

      function hidePopup(name)
      {
        document.getElementById(name).style.display = "none";
      }

    </script>

    <script type="text/javascript"></script>
  </body>
</html>
